{"ast":null,"code":"/* eslint-disable react-hooks/exhaustive-deps */import{Input,Checkbox}from\"antd\";import{useContext,useEffect}from\"react\";import{Floppy2Fill}from\"react-bootstrap-icons\";import{TaskContext}from\"../../../TaskContext\";import{useState}from\"react\";import{saveUser}from\"../../../data/api\";import{Button,message}from\"antd\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function EditUser(_ref){let{userID}=_ref;const{setUsers,users}=useContext(TaskContext);const[user,setUser]=useState(false);const handleUserSave=async()=>{setUsers(prev=>{const index=prev.findIndex(el=>userID===el.id);let updated=[...prev];updated[index]=user;return updated;});await saveUser(user);message.success(\"updated!\",2.5);};useEffect(()=>{const data=users.find(el=>el.id===userID);setUser(data);},[]);useEffect(()=>{const saveUserData=()=>{setUsers(prev=>{const updated=[...prev];const index=updated.findIndex(el=>el.id===userID);if(index!==-1){updated[index]=user;}else{updated.push(prev);}return updated;});};if(user){saveUserData();}},[user]);return/*#__PURE__*/_jsx(_Fragment,{children:user?/*#__PURE__*/_jsxs(\"div\",{className:\"w-[20rem]\",children:[/*#__PURE__*/_jsx(Input,{placeholder:\"First Name...\",onChange:e=>{setUser(el=>({...el,\"firstName\":e.target.value}));},value:user.firstName,size:\"small\",className:\"mb-base border-accent\",count:{show:true,max:100,strategy:txt=>txt.length,exceedFormatter:(txt,_ref2)=>{let{max}=_ref2;return txt.slice(0,max);}}}),/*#__PURE__*/_jsx(Input,{placeholder:\"Email...\",onChange:e=>{setUser(el=>({...el,\"email\":e.target.value}));},value:user.email,size:\"small\",className:\"mb-base border-accent\",count:{show:true,max:100,strategy:txt=>txt.length,exceedFormatter:(txt,_ref3)=>{let{max}=_ref3;return txt.slice(0,max);}}}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-row content-center justify-between \",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between hover:bg-primary hover:bg-opacity-10 pointer-default py-sm\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Administration permissions\"}),/*#__PURE__*/_jsx(Checkbox,{checked:user.isAdmin,className:\"ml-md\",onChange:e=>setUser({...user,\"isAdmin\":e.target.checked})})]}),/*#__PURE__*/_jsx(Button,{onClick:handleUserSave,type:\"text\",size:\"small\",title:\"Save Changes\",\"aria-label\":\"Save\",className:\"text-accent hover:scale-110 hover:text-primary mt-sm\",children:/*#__PURE__*/_jsx(Floppy2Fill,{})})]})]}):null});}export default EditUser;","map":{"version":3,"names":["Input","Checkbox","useContext","useEffect","Floppy2Fill","TaskContext","useState","saveUser","Button","message","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","EditUser","_ref","userID","setUsers","users","user","setUser","handleUserSave","prev","index","findIndex","el","id","updated","success","data","find","saveUserData","push","children","className","placeholder","onChange","e","target","value","firstName","size","count","show","max","strategy","txt","length","exceedFormatter","_ref2","slice","email","_ref3","checked","isAdmin","onClick","type","title"],"sources":["/Users/jasmineburt/Documents/projects/projects/pixel/src/components/Dialogs/AdminDialog/EditUser.js"],"sourcesContent":["/* eslint-disable react-hooks/exhaustive-deps */\nimport { Input, Checkbox } from \"antd\";\nimport { useContext, useEffect } from \"react\";\nimport { Floppy2Fill} from \"react-bootstrap-icons\";\nimport { TaskContext } from \"../../../TaskContext\";\nimport { useState } from \"react\";\nimport { saveUser } from \"../../../data/api\";\nimport { Button, message } from \"antd\";\n\nfunction EditUser ({ userID }) {\n    const { setUsers, users } = useContext(TaskContext);\n    const [user, setUser] = useState(false);\n\n    const handleUserSave = async () => {\n        setUsers((prev) => {\n            const index = prev.findIndex((el) => (\n                userID === el.id\n            ));\n            let updated = [...prev];\n            updated[index] = user;\n            return updated;\n        })\n        await saveUser(user)\n        message.success(\"updated!\", 2.5);\n    }\n\n    useEffect(() => {\n        const data = users.find((el) => (\n            el.id === userID\n        ))\n        setUser(data)\n    }, []);\n\n    useEffect(() => {\n        const saveUserData = () => {\n            setUsers((prev) => {\n                const updated = [...prev];\n                const index = updated.findIndex((el) => (\n                    el.id === userID\n                ));\n                if (index !== -1) {\n                    updated[index] = user;\n                } else {\n                    updated.push(prev);\n                }\n                return updated;\n            });\n        };\n        if (user) {\n            saveUserData();\n        }\n    }, [user]);\n\n    return (\n        <>\n        { user ? (\n        <div className=\"w-[20rem]\">\n        <Input\n            placeholder=\"First Name...\"\n            onChange={(e) => {\n                setUser((el) => ({\n                    ...el,\n                    \"firstName\": e.target.value,\n                }));\n            } }\n            value={user.firstName}\n            size=\"small\"\n            className=\"mb-base border-accent\"\n            count={{\n                show: true,\n                max: 100,\n                strategy: (txt) => txt.length,\n                exceedFormatter: (txt, { max }) => txt.slice(0, max)\n            }}\n        />\n\n        <Input\n            placeholder=\"Email...\"\n            onChange={(e) => {\n                setUser((el) => ({\n                    ...el,\n                    \"email\": e.target.value,\n                }));\n            } }\n            value={user.email}\n            size=\"small\"\n            className=\"mb-base border-accent\"\n            count={{\n                show: true,\n                max: 100,\n                strategy: (txt) => txt.length,\n                exceedFormatter: (txt, { max }) => txt.slice(0, max)\n            }}\n        />\n\n        <div className=\"flex flex-row content-center justify-between \">\n         <div className=\"flex justify-between hover:bg-primary hover:bg-opacity-10\n                pointer-default py-sm\">\n            <p>Administration permissions</p>\n            <Checkbox\n                checked={user.isAdmin} \n                className=\"ml-md\"\n                onChange={(e) => setUser({\n                    ...user,\n                    \"isAdmin\": e.target.checked,\n                })\n            }\n            />\n            </div>\n            <Button\n                onClick={handleUserSave}\n                type=\"text\"\n                size=\"small\"\n                title=\"Save Changes\"\n                aria-label=\"Save\"\n                className=\"text-accent hover:scale-110 hover:text-primary mt-sm\"\n            >\n                <Floppy2Fill />\n            </Button>\n        </div>   \n        </div>   \n        ) : (\n            null\n        )}\n        </>\n    );\n}\n\nexport default EditUser;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}