{"ast":null,"code":"/* eslint-disable react-hooks/exhaustive-deps */import{Input,ColorPicker}from\"antd\";import{useContext,useEffect}from\"react\";import{TrashFill,Floppy2Fill}from\"react-bootstrap-icons\";import{TaskContext}from\"../../../TaskContext\";import{useState}from\"react\";import{deleteChannel,saveChannel}from\"../../../data/api\";import{Button,message}from\"antd\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const rgbToHex=(r,g,b)=>{const toHex=n=>{const hex=Math.round(n).toString(16);return hex.length===1?'0'+hex:hex;};return`#${toHex(r)}${toHex(g)}${toHex(b)}`;};function EditChannel(_ref){let{channelID}=_ref;const{setChannels,channels}=useContext(TaskContext);const[channel,setChannel]=useState(false);const handleSaveChannel=async()=>{setChannels(prev=>{const index=prev.findIndex(c=>c.channelID===channel.channelID);let updated=[...channels];updated[index]=channel;return updated;});await saveChannel(channel);message.success(\"saved!\",2.5);};const handleChannelDelete=async()=>{setChannels(prev=>{let updated=[...prev];const index=prev.findIndex(c=>c.channelID===channel.channelID);updated.splice(index,1);return updated;});await deleteChannel(channel.channelID);message.success(\"deleted!\",2.5);};useEffect(()=>{const data=channels.find(_channel=>_channel.channelID===channelID);setChannel(data);},[]);const handleColourChange=colour=>{setChannel(ch=>({...ch,\"colour\":rgbToHex(colour.metaColor.r,colour.metaColor.g,colour.metaColor.b)}));};useEffect(()=>{const saveChannelData=()=>{setChannels(prevChannels=>{const updatedChannels=[...prevChannels];const index=updatedChannels.findIndex(c=>c.channelID===channel.channelID);if(index!==-1){updatedChannels[index]=channel;}else{updatedChannels.push(channel);}return updatedChannels;});};if(channel){saveChannelData();}},[channel]);return/*#__PURE__*/_jsx(_Fragment,{children:channel?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-row align-center my-base border-accent\",children:[/*#__PURE__*/_jsx(Input,{placeholder:\"Channel Code\",size:\"small\",value:channel.channelCode,className:\"border-accent\",onChange:e=>{setChannel(el=>({...el,\"channelCode\":e.target.value}));},count:{show:true,max:8,strategy:txt=>txt.length,exceedFormatter:(txt,_ref2)=>{let{max}=_ref2;return txt.slice(0,max);}}}),/*#__PURE__*/_jsx(ColorPicker,{defaultValue:\"#ffa8fe\",value:channel.colour,className:\"ml-base border-accent z-3000\",size:\"small\",onChange:handleColourChange,getPopupContainer:triggerNode=>triggerNode.parentNode})]}),/*#__PURE__*/_jsx(Input,{placeholder:\"Channel Name\",onChange:e=>{setChannel(el=>({...el,\"name\":e.target.value}));},value:channel.name,size:\"small\",className:\"mb-base border-accent\",count:{show:true,max:100,strategy:txt=>txt.length,exceedFormatter:(txt,_ref3)=>{let{max}=_ref3;return txt.slice(0,max);}}}),/*#__PURE__*/_jsx(Button,{onClick:handleChannelDelete,size:\"small\",type:\"text\",title:\"Delete forever \\uD83D\\uDE31\",\"aria-label\":\"Delete\",className:\"text-accent hover:scale-110 hover:text-primary mr-lg\",children:/*#__PURE__*/_jsx(TrashFill,{})}),/*#__PURE__*/_jsx(Button,{onClick:handleSaveChannel,type:\"text\",size:\"small\",title:\"Save Changes\",\"aria-label\":\"Archive\",className:\"text-accent hover:scale-110 hover:text-primary mr-lg\",children:/*#__PURE__*/_jsx(Floppy2Fill,{})})]}):null});}export default EditChannel;","map":{"version":3,"names":["Input","ColorPicker","useContext","useEffect","TrashFill","Floppy2Fill","TaskContext","useState","deleteChannel","saveChannel","Button","message","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","rgbToHex","r","g","b","toHex","n","hex","Math","round","toString","length","EditChannel","_ref","channelID","setChannels","channels","channel","setChannel","handleSaveChannel","prev","index","findIndex","c","updated","success","handleChannelDelete","splice","data","find","_channel","handleColourChange","colour","ch","metaColor","saveChannelData","prevChannels","updatedChannels","push","children","className","placeholder","size","value","channelCode","onChange","e","el","target","count","show","max","strategy","txt","exceedFormatter","_ref2","slice","defaultValue","getPopupContainer","triggerNode","parentNode","name","_ref3","onClick","type","title"],"sources":["/Users/jasmineburt/Documents/projects/projects/pixel/src/components/Dialogs/SettingsDialog/EditChannel.js"],"sourcesContent":["/* eslint-disable react-hooks/exhaustive-deps */\nimport { Input, ColorPicker } from \"antd\";\nimport { useContext, useEffect } from \"react\";\nimport { TrashFill, Floppy2Fill} from \"react-bootstrap-icons\";\nimport { TaskContext } from \"../../../TaskContext\";\nimport { useState } from \"react\";\nimport { deleteChannel, saveChannel } from \"../../../data/api\";\nimport { Button, message } from \"antd\";\n\nconst rgbToHex = (r, g, b) => {\n    const toHex = (n) => {\n        const hex = Math.round(n).toString(16);\n        return hex.length === 1 ? '0' + hex : hex;\n    };\n    return `#${toHex(r)}${toHex(g)}${toHex(b)}`;\n};\n\nfunction EditChannel ({ channelID }) {\n    const { setChannels, channels } = useContext(TaskContext);\n    const [channel, setChannel] = useState(false);\n\n    const handleSaveChannel = async () => {\n        setChannels((prev) => {\n            const index = prev.findIndex((c) => (\n                c.channelID === channel.channelID\n            ));\n            let updated = [...channels];\n            updated[index] = channel;\n            return updated;\n        })\n        await saveChannel(channel);\n        message.success(\"saved!\", 2.5);\n    }\n\n    const handleChannelDelete = async () => {\n        setChannels((prev) => {\n            let updated = [...prev]\n            const index = prev.findIndex((c) => (\n                c.channelID === channel.channelID\n            ));\n            updated.splice(index, 1);\n            return updated;\n        });\n        await deleteChannel(channel.channelID);\n        message.success(\"deleted!\", 2.5);\n    }\n\n    useEffect(() => {\n        const data = channels.find((_channel) => (\n            _channel.channelID === channelID\n        ))\n        setChannel(data)\n    }, []);\n\n    const handleColourChange = (colour) => {\n        setChannel((ch) => ({\n            ...ch,\n            \"colour\": rgbToHex(colour.metaColor.r, colour.metaColor.g, colour.metaColor.b),\n        }));\n    }\n\n    useEffect(() => {\n        const saveChannelData = () => {\n            setChannels((prevChannels) => {\n                const updatedChannels = [...prevChannels];\n                const index = updatedChannels.findIndex((c) => (\n                    c.channelID === channel.channelID\n                ));\n                if (index !== -1) {\n                    updatedChannels[index] = channel;\n                } else {\n                    updatedChannels.push(channel);\n                }\n                return updatedChannels;\n            });\n        };\n        if (channel) {\n            saveChannelData();\n        }\n    }, [channel]);\n\n    return (\n        <>\n        { channel ? (\n        <div>\n            <div className=\"flex flex-row align-center my-base border-accent\">\n            <Input\n                placeholder=\"Channel Code\"\n                size=\"small\"\n                value={channel.channelCode}\n                className=\"border-accent\"\n                onChange={(e) => {\n                    setChannel((el) => ({\n                        ...el,\n                        \"channelCode\": e.target.value,\n                    }));\n                } }\n                count={{\n                    show: true,\n                    max: 8,\n                    strategy: (txt) => txt.length,\n                    exceedFormatter: (txt, { max }) => txt.slice(0, max)\n                }} />\n            <ColorPicker\n                defaultValue=\"#ffa8fe\"\n                value={channel.colour}\n                className=\"ml-base border-accent z-3000\"\n                size=\"small\"\n                onChange={handleColourChange}\n                getPopupContainer={(triggerNode) => triggerNode.parentNode} />\n        </div>\n        <Input\n            placeholder=\"Channel Name\"\n            onChange={(e) => {\n                setChannel((el) => ({\n                    ...el,\n                    \"name\": e.target.value,\n                }));\n            } }\n            value={channel.name}\n            size=\"small\"\n            className=\"mb-base border-accent\"\n            count={{\n                show: true,\n                max: 100,\n                strategy: (txt) => txt.length,\n                exceedFormatter: (txt, { max }) => txt.slice(0, max)\n            }} />\n\n            <Button \n                onClick={handleChannelDelete}\n                size=\"small\"\n                type=\"text\"\n                title=\"Delete forever ðŸ˜±\"\n                aria-label=\"Delete\"\n                className=\"text-accent hover:scale-110 hover:text-primary mr-lg\"\n            >\n                <TrashFill />\n            </Button>\n\n            <Button \n                onClick={handleSaveChannel}\n                type=\"text\"\n                size=\"small\"\n                title=\"Save Changes\"\n                aria-label=\"Archive\"\n                className=\"text-accent hover:scale-110 hover:text-primary mr-lg\"\n            >\n                <Floppy2Fill />\n            </Button>\n            </div>\n            \n        ) : (\n            null\n        )}\n        </>\n    );\n}\n\nexport default EditChannel;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}